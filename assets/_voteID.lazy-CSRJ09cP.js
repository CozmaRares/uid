import{d as f,r as i,j as e,O as v,c as n,C as b,g as P,T as N,D as w,R as I,h as z,P as L,a as M,N as O,f as g,b as H,B as h,t as m,i as q}from"./index-DEsjeKTu.js";import{T as u,a as x,b as B}from"./Title-DDTyDMsY.js";import{C as p}from"./card-DQXoFty6.js";import{P as E}from"./progress-Cw_p1CyB.js";import{v as U}from"./votes-ChOtnCpU.js";import{z as y,u as X,F as Z,a as $,b as G,c as J,e as K,T as Q,d as W,t as Y}from"./textarea-CvvRjKyu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=f("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=f("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=f("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ae=I,te=z,oe=L,k=i.forwardRef(({className:a,...s},t)=>e.jsx(v,{ref:t,className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s}));k.displayName=v.displayName;const C=i.forwardRef(({className:a,children:s,...t},r)=>e.jsxs(oe,{children:[e.jsx(k,{}),e.jsxs(b,{ref:r,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t,children:[s,e.jsxs(P,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));C.displayName=b.displayName;const D=({className:a,...s})=>e.jsx("div",{className:n("flex flex-col space-y-1.5 text-center sm:text-left",a),...s});D.displayName="DialogHeader";const T=i.forwardRef(({className:a,...s},t)=>e.jsx(N,{ref:t,className:n("text-lg font-semibold leading-none tracking-tight",a),...s}));T.displayName=N.displayName;const F=i.forwardRef(({className:a,...s},t)=>e.jsx(w,{ref:t,className:n("text-sm text-muted-foreground",a),...s}));F.displayName=w.displayName;const ne=M("/vote/$voteID")({component:re});function re(){const{voteID:a}=ne.useParams(),s=U.find(o=>o.id===a),[t,r]=i.useState(null),[S,j]=i.useState(!1);if(!s)return e.jsx(O,{});const V=o=>{console.log(o),m.message("Alternative solution submitted successfully.",{description:"Thank you for your feedback!"}),j(!1)},l=t!==null,A=t===s.id;return e.jsxs("main",{className:"space-y-8",children:[e.jsxs("section",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx(u,{variant:"page",className:"border-b-0",children:e.jsx(x,{children:s.title})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-medium",children:g(s.numVotes)})," ",e.jsxs("span",{className:"opacity-80",children:["votes out of ",g(s.necessaryVotes)]}),e.jsx(E,{value:s.numVotes/s.necessaryVotes*100})]})]}),e.jsxs(p,{className:"overflow-hidden",children:[e.jsx("p",{className:"p-4",children:s.description}),e.jsxs("div",{className:"flex flex-row justify-between gap-4 md:justify-end",children:[e.jsxs(ae,{open:S,onOpenChange:o=>j(o),children:[e.jsx(te,{className:n(H({variant:"outline"}),"rounded-none rounded-tr-xl border-b-0 border-l-0 border-primary md:rounded-t-xl md:border-l"),children:"Propose alternative"}),e.jsxs(C,{children:[e.jsxs(D,{children:[e.jsx(T,{children:"Propose alternative"}),e.jsx(F,{children:"Propose an innovative solution to the problem."})]}),e.jsx(le,{onSubmit:V})]})]}),e.jsx(h,{className:n("w-[20ch] rounded-none rounded-tl-xl text-base",l&&"cursor-auto bg-secondary hover:bg-secondary disabled:opacity-100"),disabled:l,onClick:()=>{r(s.id),m.success("Thank you for voting!")},children:A?"Signed":l?"Already voted":"Sign here"})]})]})]}),e.jsxs("section",{children:[e.jsx(u,{variant:"section",children:e.jsx(x,{children:"Alternatives"})}),e.jsx("ul",{className:"space-y-3",children:s.alternatives?s.alternatives.map((o,c)=>{const d=s.id+c,R=t===d;return e.jsx("li",{children:e.jsxs(p,{className:"flex h-full w-full flex-row items-center justify-between gap-2 p-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("p",{children:o.solution}),e.jsxs("span",{className:"row-start-2 italic opacity-90",children:[o.numVotes," votes"]})]}),e.jsx(h,{className:n("w-[25ch]",l&&"cursor-auto bg-secondary hover:bg-secondary disabled:opacity-100"),disabled:l,onClick:()=>{r(d),m.success("Thank you for voting!")},children:R?"Signed":l?"Already voted":"Sign here"})]})},d)}):e.jsx("div",{children:"No alternatives yet"})})]}),e.jsxs("section",{children:[e.jsxs(u,{variant:"section",children:[e.jsx(x,{children:"Comments"}),e.jsx(B,{children:"Share your thoughts"})]}),e.jsx("ul",{className:"space-y-4",children:s.comments?s.comments.map((o,c)=>e.jsx("li",{children:e.jsx(ce,{comment:o})},c)):e.jsx("div",{children:"No comments yet"})})]})]})}const ie=y.object({solution:y.string().min(1)});function le({onSubmit:a}){const s=X({resolver:Y(ie),defaultValues:{solution:""}});return e.jsx(Z,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(a),className:"contents",children:[e.jsx($,{control:s.control,name:"solution",render:({field:t})=>e.jsxs(G,{className:"space-y-0",children:[e.jsx(J,{className:"sr-only",children:"Alternative Solution"}),e.jsx(K,{children:e.jsx(Q,{placeholder:"Describe your solution...",className:"resize-none",...t})}),e.jsx(W,{})]})}),e.jsx(h,{type:"submit",className:"w-full",children:"Submit"})]})})}function ce({comment:a}){const[s,t]=i.useState(0);return e.jsxs(p,{className:"px-4 py-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["@",a.author]}),e.jsx("span",{className:"tracking-tighter text-muted-foreground",children:q(a.date)})]}),e.jsx("span",{children:a.content}),e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsxs("div",{className:"flex flex-row items-center gap-1.5",children:[e.jsx("button",{className:n("focus-ring p-0.5",s==1&&"text-secondary"),onClick:()=>t(r=>r==1?0:1),children:e.jsx(ee,{width:"1em",height:"1em",fill:s==1?"currentColor":"none"})}),a.likes]}),e.jsx("button",{className:n("focus-ring p-0.5",s==-1&&"text-primary"),onClick:()=>t(r=>r==-1?0:-1),children:e.jsx(_,{width:"1em",height:"1em",fill:s==-1?"currentColor":"none"})})]})]})}export{ne as Route};
